<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/image-picker@0.3.1/image-picker/image-picker.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
    <title>龙辉护符</title>
</head>

<body>
    <select class="icon-select" id="icon-select">
        <option></option>
    </select>
</body>

<script>
    var current_type = 'amulet';
    var iconOptions = document.getElementById("icon-select");
    icon_dic = {};
    fetch(`./index.json`)
        .then(function(response) {
            if (!response.ok) {
                throw Error(response.statusText);
            }
            return response;
        })
        .then(response => response.json())
        .then(json => {
            icon_dic = json[current_type];
            loadOptions();
        }).catch(function(error) {
            console.log(error);
        });

    function loadOptions() {
        $("select.icon-select").empty();
        icon_dic.forEach(function(item, index) {
            var optf = document.createElement('option');
            optf.setAttribute("data-img-src", item);
            optf.setAttribute("id", index)
            optf.setAttribute("value", index)
            iconOptions.appendChild(optf);
        });
    }
</script>

</html>